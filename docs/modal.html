                  <!-- Popup Overlay -->
                  <div id="popup-overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-40  pointer-events-none"></div>
                    
                  <!-- Popup Modal -->
                  <div id="popup-modal" class="fixed inset-0 flex items-center justify-center hidden z-50  pointer-events-auto">
                      <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-lg">
                          <div class="flex justify-between items-center mb-6">
                              <h3 class="text-2xl font-bold text-gray-900">여행 기록 작성</h3>
                              <button id="close-popup" class="text-gray-500 hover:text-gray-700">
                                  <i class="fas fa-times"></i>
                              </button>
                          </div>
                          <div class="space-y-4">
                              <!-- AI Assistance Button -->
                              <button id="ai-assistant" class="w-full bg-custom text-white px-6 py-4 rounded-lg flex items-center justify-between hover:bg-custom-dark transition-colors">
                                  <div>
                                      <h4 class="text-lg font-bold">AI 도움으로 작성하기</h4>
                                      <p class="text-sm text-white/80 text-left">AI가 여행 기록 작성을 도와드립니다</p>
                                  </div>
                                  <i class="fas fa-robot text-2xl"></i>
                              </button>
                              
                              <!-- Manual Writing Button -->
                              <button id="manual-button" class="w-full bg-gray-100 text-gray-900 px-6 py-4 rounded-lg flex items-center justify-between hover:bg-gray-200 transition-colors">
                                  <div>
                                      <h4 class="text-lg font-bold">직접 작성하기</h4>
                                      <p class="text-sm text-gray-600 text-left">나만의 방식으로 자유롭게 작성하기</p>
                                  </div>
                                  <i class="fas fa-pencil-alt text-2xl"></i>
                              </button>
                          </div>
                      </div>
                  </div>


                  <div id="write-form" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50  pointer-events-auto">
                      <div class="bg-white p-6 rounded-lg shadow-lg w-96 relative"> <!-- relative 추가 -->
                          <!-- 닫기 버튼을 헤더 오른쪽 상단에 배치 -->
                          <div class="flex justify-between items-center mb-4">
                              <h2 class="text-lg font-semibold">여행 기록 작성</h2>
                          </div>
                          <!-- 폼 내용 -->
                          <label class="block text-sm font-medium text-gray-700 mb-2">제목</label>
                          <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-custom focus:border-custom" placeholder="여행 제목을 입력하세요" />
                  
                          <div class="mt-4">
                              <label class="block text-sm font-medium text-gray-700 mb-2">여행 날짜</label>
                              <input type="date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-custom focus:border-custom" />
                          </div>
                  
                          <div class="mt-4">
                              <label class="block text-sm font-medium text-gray-700 mb-2">여행지</label>
                              <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-custom focus:border-custom" placeholder="여행한 도시, 국가를 입력하세요" />
                          </div>
                  
                          <div class="mt-4">
                              <label class="block text-sm font-medium text-gray-700 mb-2">내용</label>
                              <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-custom focus:border-custom h-40" placeholder="여행 이야기를 자유롭게 작성해주세요"></textarea>
                          </div>
                  
                          <div class="mt-4">
                              <label class="block text-sm font-medium text-gray-700 mb-2">음악 추가</label>
                              <p class="text-xs text-gray-500 mt-2">직접 선택 시 지원 형식: MP3, WAV (최대 20MB)</p>
                              <div class="flex space-x-4 mb-4  pt-4">
                                  <button type="button" class="flex-1 w-[184px] h-[48px] rounded-lg flex flex-row justify-center items-center p-[12px_16px] bg-black text-white">
                                      AI 음악 추천 받기
                                  </button>
                                  <button type="button" class="flex-1 w-[184px] h-[48px] rounded-lg flex flex-row justify-center items-center p-[12px_16px] bg-[#F3F4F6]">
                                      직접 선택하기
                                  </button>
                              </div>
                              <div class="hidden" id="manual-music-input">
                                  <div class="flex items-center space-x-4">
                                    <input type="file" accept="image/*" class="hidden" id="image-upload" multiple />
                                    <button id="choose-image-btn" class="bg-custom text-white px-4 py-2 rounded-lg hover:bg-custom-dark transition-colors">
                                        사진 선택하기
                                    </button>
                                  </div>
                              </div>
                          </div>
                  
                          
                  
                          <div class="flex justify-end space-x-4 mt-4">
                              <button type="button" id="close-user-popup" class="px-4 py-3 bg-gray-300 rounded-lg">취소</button>
                              <button type="submit" class="bg-custom text-white px-4 py-3 rounded-lg hover:bg-custom-dark transition-colors">작성 완료</button>
                          </div>
                      </div>
                  </div>                                        

                  <div id="ai-image-popup" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden pointer-events-none"></div>

                  <div id="ai-image-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden">
                    <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-2xl font-bold text-gray-900">사진 업로드</h3>
                            <button id="close-ai-popup" class="text-gray-500 hover:text-gray-700">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="space-y-4">
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center">
                                <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                                <p class="text-gray-600 mb-2">여행 사진을 드래그하거나 클릭하여 업로드하세요</p>
                                <input type="file" accept="image/*" class="hidden" id="image-upload" multiple />
                                <button id="choose-image-btn" class="bg-custom text-white px-4 py-2 rounded-lg hover:bg-custom-dark transition-colors">
                                    사진 선택하기
                                </button>
                            </div>
                            <p class="text-xs text-gray-500 mt-2">지원 형식: JPG, PNG (최대 10MB)</p>
                            <div class="bg-gray-50 rounded-lg p-4 border border-gray-200 h-48 overflow-y-auto" id="file-list">
                                <div class="flex items-center justify-between mb-2" id="file-upload-area">
                                    <span class="text-sm font-medium text-gray-700" id="file-info-text">파일 정보</span>
                                </div>
                                <div class="space-y-2"></div> </div>
                            <button id="next-btn" class="w-full bg-custom text-white px-6 py-3 rounded-lg hover:bg-custom-dark transition-colors mt-6" disabled>
                                <i class="fas fa-arrow-right mr-2"></i>다음으로
                            </button>
                        </div>
                    </div>
                </div>

              </div>
          </div>

