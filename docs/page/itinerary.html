<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Travel Itinerary</title>
    <!-- 외부 폰트, 아이콘, Tailwind 등 -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <!-- 커스텀 스타일 -->
    <link href="/css/style.css" rel="stylesheet" />
    <!-- Tailwind CSS 및 설정 -->
    <link
      href="https://ai-public.creatie.ai/gen_page/tailwind-custom.css"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com/3.4.5"></script>
    <script
      src="https://ai-public.creatie.ai/gen_page/tailwind-config.min.js"
      data-color="#000000"
      data-border-radius="small"
    ></script>
  </head>
  <body class="bg-gray-50 font-sans">
    <!-- 헤더 영역 -->
    <header class="relative h-[400px] overflow-hidden">
      <img class="w-full h-full object-cover" />
      <div
        class="absolute inset-0 bg-gradient-to-b from-black/50 to-black/20"
      ></div>
      <div class="absolute top-0 left-0 right-0 p-6">
        <nav class="max-w-8xl mx-auto flex justify-between items-center">
          <button
            class="text-white px-4 py-2 !rounded-button flex items-center gap-2 hover:bg-white/10"
          >
            <i class="fas fa-arrow-left"></i>Back
          </button>
          <div class="flex gap-4">
            <button
              class="text-white px-4 py-2 !rounded-button hover:bg-white/10"
            >
              <i class="far fa-bookmark"></i>
            </button>
            <button
              class="text-white px-4 py-2 !rounded-button hover:bg-white/10"
            >
              <i class="fas fa-share-alt"></i>
            </button>
          </div>
        </nav>
      </div>
      <div class="absolute bottom-0 left-0 right-0 p-8">
        <div class="max-w-8xl mx-auto">
          <h1 class="text-4xl font-bold text-white mb-2">Main Title</h1>
          <p id="header-route" class="text-white/90">subTitle</p>
        </div>
      </div>
    </header>

    <!-- 메인 컨텐츠 영역 -->
    <main class="max-w-8xl mx-auto px-6 py-8">
      <div class="grid grid-cols-12 gap-8">
        <!-- 왼쪽 사이드바 (여행 개요 & 날씨) -->
        <div class="col-span-4">
          <div
            id="trip-overview"
            class="bg-white rounded-lg shadow-sm p-6 mb-6"
          >
            <h2 class="text-xl font-semibold mb-4">여행 개요</h2>
            <div class="space-y-4">
              <div class="flex items-center gap-3">
                <i class="fas fa-calendar text-custom"></i>
                <div>
                  <p class="text-sm text-gray-600">여행 기간</p>
                  <p id="trip-duration" class="font-medium"></p>
                </div>
              </div>
              <div class="flex items-center gap-3">
                <i class="fas fa-map-marker-alt text-custom"></i>
                <div>
                  <p class="text-sm text-gray-600">출발 장소</p>
                  <p id="starting-point" class="font-medium"></p>
                </div>
              </div>
              <div class="flex items-center gap-3">
                <i class="fas fa-users text-custom"></i>
                <div>
                  <p class="text-sm text-gray-600">여행 인원</p>
                  <p class="font-medium" id="trip-travelers">2명</p>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-white rounded-lg shadow-sm p-6">
            <h2 class="text-xl font-semibold mb-4">날씨 예보</h2>
            <div class="weather-forecast space-y-4">
              <!-- 날씨 API 호출 결과가 이 영역에 채워집니다 -->
            </div>
          </div>
        </div>

        <!-- 오른쪽 컨텐츠 영역 (Day 관리 및 이벤트 기능) -->
        <div class="col-span-8">
          <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
            <!-- Day 버튼 영역 -->
            <div
              id="day-buttons-container"
              class="flex items-center gap-4 mb-6"
            >
              <button
                class="day-button px-4 py-2 bg-custom text-white !rounded-button"
                id="day-btn-1"
                onclick="showDayContent(1)"
              >
                Day 1
              </button>
              <button
                class="px-4 py-2 text-gray-600 hover:bg-gray-100 !rounded-button"
                onclick="addDay()"
              >
                More
              </button>
            </div>
            <!-- Day 콘텐츠 영역 -->
            <div id="day-contents-container">
              <!-- Day 1 콘텐츠 (이벤트들이 동적으로 추가되는 영역) -->
              <div
                id="day1-content"
                class="day-content space-y-8 transition-all duration-300 ease-in-out"
              >
                <div
                  class="events-container border-l-2 border-custom"
                  id="day1-events-container"
                >
                  <!-- 초기 예시 이벤트 -->
                  <div
                    class="relative pl-8 event-item"
                    data-time="09:00"
                    id="event-1"
                  >
                    <div
                      class="absolute -left-2 top-0 w-4 h-4 rounded-full bg-custom"
                    ></div>
                    <div class="bg-gray-50 rounded-lg p-4">
                      <div class="flex items-center gap-3 mb-2">
                        <i class="fas fa-clock text-custom"></i>
                        <p class="text-sm text-gray-600">09:00</p>
                        <span
                          class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded"
                          >Confirmed</span
                        >
                      </div>
                      <h3 class="text-lg font-medium mb-2">
                        Arrival at Tokyo Narita Airport
                      </h3>
                      <p class="text-gray-600 mb-4">Flight JL750 from LAX</p>
                      <div class="flex justify-between items-start">
                        <div class="flex gap-2">
                          <button
                            class="detail-btn text-custom hover:bg-custom/10 px-3 py-1.5 !rounded-button"
                            onclick="toggleDetails('event-1-details')"
                          >
                            <i class="far fa-file-alt mr-2"></i>Details
                          </button>
                          <button
                            class="reservation-btn bg-blue-500 text-white hover:bg-blue-600 px-3 py-1.5 !rounded-button"
                          >
                            Reservation Assistant
                          </button>
                        </div>
                        <div class="flex gap-2">
                          <button
                            class="edit-event-btn text-gray-600 hover:text-red-500 px-3 py-1.5 !rounded-button"
                            onclick="openEditEventModal('event-1')"
                          >
                            <i class="fas fa-pencil-alt"></i>
                          </button>
                          <button
                            class="delete-event-btn text-gray-600 hover:text-red-500 px-3 py-1.5 !rounded-button"
                            onclick="openDeleteEventModal('event-1', 'Arrival at Tokyo Narita Airport')"
                          >
                            <i class="fas fa-trash"></i>
                          </button>
                        </div>
                      </div>
                      <div
                        id="event-1-details"
                        class="hidden transition-all duration-300 mt-4 p-4 bg-white rounded shadow"
                      >
                        <p class="text-gray-600">
                          Detailed information about the event goes here.
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Day 2 콘텐츠 (빈 페이지) -->
              <div
                id="day2-content"
                class="day-content hidden transition-all duration-300 ease-in-out"
              >
                <div class="events-container" id="day2-events-container">
                  <div
                    class="flex flex-col items-center justify-center py-20 bg-gray-50 rounded-lg space-y-6 empty-message"
                  >
                    <div class="text-gray-500 text-center">
                      <h3 class="text-xl font-medium mb-2">
                        No events planned for this day
                      </h3>
                      <p>
                        Start by adding events or get suggestions for your
                        itinerary
                      </p>
                    </div>
                    <div class="flex gap-4">
                      <button
                        class="bg-custom text-white px-6 py-2 !rounded-button"
                        onclick="openEventModal('add')"
                      >
                        <i class="fas fa-plus mr-2"></i>Add Event
                      </button>
                      <button
                        class="bg-blue-500 text-white px-6 py-2 !rounded-button"
                      >
                        <i class="fas fa-lightbulb mr-2"></i>Get Suggestions
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- 하단 고정 영역 (푸터) -->
    <div class="fixed bottom-0 left-0 right-0 bg-white py-4">
      <div class="max-w-8xl mx-auto px-6 flex justify-between items-center">
        <div class="flex gap-4">
          <button
            class="bg-custom text-white px-6 py-2 !rounded-button"
            onclick="openEventModal('add')"
          >
            <i class="fas fa-plus mr-2"></i>Add Event
          </button>
          <button
            class="border border-custom text-custom px-6 py-2 !rounded-button"
            onclick="openDeleteDayModal()"
          >
            <i class="fas fa-trash mr-2"></i>Delete Day
          </button>
        </div>
        <div class="text-center text-gray-500 text-sm flex-1 text-center">
          © 2025 아보하 여행. All rights reserved.
        </div>
      </div>
    </div>

    <!-- Add/Edit Event 모달 -->
    <div
      id="add-event-modal"
      class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50"
    >
      <div class="bg-white rounded-lg w-[600px] p-8 shadow-xl text-lg">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-2xl font-semibold" id="event-modal-title">
            Add New Event
          </h3>
          <button
            onclick="document.getElementById('add-event-modal').classList.add('hidden'); document.getElementById('add-event-modal').classList.remove('flex');"
            class="text-gray-500 hover:text-gray-700 text-2xl"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
        <form
          id="event-form"
          class="space-y-6"
          onsubmit="eventModalSubmit(event)"
        >
          <input type="hidden" id="event-id" value="" />

          <!-- 추가: 날짜 선택 필드 (현재 존재하는 Day 번호 목록을 동적으로 채움) -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >날짜 선택</label
            >
            <select
              id="event-day"
              class="w-full border-gray-300 rounded-md !rounded-button px-4 py-3"
            >
              <!-- 옵션은 updateEventDayOptions() 함수에서 동적으로 채워집니다 -->
            </select>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >일정</label
            >
            <input
              type="text"
              id="event-title"
              class="w-full border-gray-300 rounded-md !rounded-button px-4 py-3"
              placeholder="일정을 입력하세요"
              required
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >시간</label
            >
            <label for="event-time" class="relative block cursor-pointer">
              <input
                type="time"
                id="event-time"
                class="w-full border-gray-300 rounded-md pl-12 pr-4 py-3"
                required
                step="60"
                lang="ko"
              />
              <span
                class="absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-400"
              >
                <i class="fas fa-clock"></i>
              </span>
            </label>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >장소</label
            >
            <input
              type="text"
              id="event-location"
              class="w-full border-gray-300 rounded-md !rounded-button px-4 py-3"
              placeholder="장소를 입력하세요"
              required
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >상세 내용</label
            >
            <textarea
              id="event-description"
              class="w-full border-gray-300 rounded-md !rounded-button px-4 py-3"
              rows="4"
              placeholder="상세 내용을 입력하세요"
            ></textarea>
          </div>
          <!-- 추가 메모 입력 -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >메모</label
            >
            <textarea
              id="event-memo"
              class="w-full border-gray-300 rounded-md !rounded-button px-4 py-3"
              rows="2"
              placeholder="추가 메모를 입력하세요"
            ></textarea>
          </div>

          <div class="flex justify-end gap-4">
            <button
              type="button"
              onclick="document.getElementById('add-event-modal').classList.add('hidden'); document.getElementById('add-event-modal').classList.remove('flex');"
              class="px-4 py-2 text-gray-600 hover:bg-gray-100 !rounded-button"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="px-6 py-3 bg-custom text-white !rounded-button hover:bg-custom/90"
            >
              Save
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Delete Day 모달 -->
    <div
      id="delete-day-modal"
      class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50"
    >
      <div class="bg-white rounded-lg w-[400px] p-6 shadow-xl">
        <h3 class="text-xl font-semibold mb-4">Delete Day</h3>
        <p class="mb-6" id="delete-day-modal-message">
          Are you sure you want to delete Day ?
        </p>
        <div class="flex justify-end gap-4">
          <button
            onclick="document.getElementById('delete-day-modal').classList.add('hidden'); document.getElementById('delete-day-modal').classList.remove('flex');"
            class="px-4 py-2 text-gray-600 hover:bg-gray-100 !rounded-button"
          >
            Cancel
          </button>
          <button
            onclick="confirmDeleteDay()"
            class="px-4 py-2 bg-red-500 text-white !rounded-button hover:bg-red-600"
          >
            Delete
          </button>
        </div>
      </div>
    </div>

    <!-- Delete Event 모달 -->
    <div
      id="delete-event-modal"
      class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50"
    >
      <div class="bg-white rounded-lg w-[400px] p-6 shadow-xl">
        <h3 class="text-xl font-semibold mb-4">Delete Event</h3>
        <p class="mb-6" id="delete-event-modal-message">
          Are you sure you want to delete this event?
        </p>
        <div class="flex justify-end gap-4">
          <button
            onclick="document.getElementById('delete-event-modal').classList.add('hidden'); document.getElementById('delete-event-modal').classList.remove('flex');"
            class="px-4 py-2 text-gray-600 hover:bg-gray-100 !rounded-button"
          >
            Cancel
          </button>
          <button
            onclick="confirmDeleteEvent()"
            class="px-4 py-2 bg-red-500 text-white !rounded-button hover:bg-red-600"
          >
            Delete
          </button>
        </div>
      </div>
    </div>

    <!-- 여행 개요 수정 모달 (overview-modal) -->
    <!-- 여행 개요 수정 모달 -->
    <div
      id="overview-modal"
      class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50"
    >
      <div class="bg-white rounded-lg w-[400px] p-6 shadow-xl">
        <h3 class="text-xl font-semibold mb-4">여행 개요 수정</h3>
        <form
          id="overview-form"
          onsubmit="overviewModalSubmit(event)"
          class="space-y-4"
        >
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >여행 시작 날짜</label
            >
            <input
              type="date"
              id="overview-start-date"
              class="w-full border-gray-300 rounded-md px-3 py-2"
              required
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >여행 나라</label
            >
            <input
              type="text"
              id="overview-country"
              class="w-full border-gray-300 rounded-md px-3 py-2"
              placeholder="예: United States"
              required
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >여행 도시</label
            >
            <input
              type="text"
              id="overview-city"
              class="w-full border-gray-300 rounded-md px-3 py-2"
              placeholder="예: Los Angeles"
              required
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >여행 인원</label
            >
            <input
              type="number"
              id="overview-travelers"
              class="w-full border-gray-300 rounded-md px-3 py-2"
              min="1"
              required
            />
          </div>
          <div class="flex justify-end gap-4">
            <button
              type="button"
              onclick="closeOverviewModal()"
              class="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="px-4 py-2 bg-custom text-white rounded hover:bg-custom/90"
            >
              Save
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- app.js 파일 불러오기 -->
    <script src="/js/app.js"></script>
  </body>
</html>
